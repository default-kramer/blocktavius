<Window x:Class="Blocktavius.AppDQB2.PlanScriptDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Blocktavius.AppDQB2"
        mc:Ignorable="d"
        Title="TODO" Height="450" Width="800">
    <Grid VerticalAlignment="Top">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Orientation="Vertical" HorizontalAlignment="Center">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Label VerticalAlignment="Center">Target Slot:</Label>
                <ComboBox MinWidth="75" VerticalAlignment="Center" ItemsSource="{Binding Project.DestSlots}" SelectedItem="{Binding Project.SelectedDestSlot}" DisplayMemberPath="Name"></ComboBox>
            </StackPanel>
            <StackPanel Margin="0,8,0,0" Orientation="Horizontal" HorizontalAlignment="Center">
                <Label VerticalAlignment="Center">Include:</Label>
                <ComboBox MinWidth="75" VerticalAlignment="Center" ItemsSource="{Binding Project.InclusionModes}" SelectedItem="{Binding Project.SelectedInclusionMode}" DisplayMemberPath="DisplayName"></ComboBox>
            </StackPanel>
            <TextBlock Margin="0,20,0,0" TextWrapping="Wrap"><Run Text="Source:  "></Run><Run Text="{Binding Project.SelectedSourceSlot.FullPath, Mode=OneWay}"></Run></TextBlock>
            <TextBlock Margin="0,3,0,0" TextWrapping="Wrap"><Run Text="Dest:  "></Run><Run Text="{Binding Project.SelectedDestSlot.FullPath, Mode=OneWay}"></Run></TextBlock>
        </StackPanel>
        <ListView Grid.Row="1" ItemsSource="{Binding PlanItems}" HorizontalAlignment="Center">
            <ListView.ItemContainerStyle>
                <Style TargetType="{x:Type ListViewItem}">
                    <Setter Property="Focusable" Value="False"></Setter>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.View>
                <GridView AllowsColumnReorder="False">
                    <GridViewColumn Header="Backup?">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <RadioButton IsEnabled="False" IsChecked="{Binding WillBeBackedUp, Mode=OneWay}"></RadioButton>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Copy?">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <RadioButton IsEnabled="False" IsChecked="{Binding WillBeCopied, Mode=OneWay}"></RadioButton>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Modify?">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <RadioButton IsEnabled="False" IsChecked="{Binding WillBeModified, Mode=OneWay}"></RadioButton>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="File" DisplayMemberBinding="{Binding ShortName}"></GridViewColumn>
                    <GridViewColumn Header="Status" Width="90">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <TextBlock VerticalAlignment="Center" Text="{Binding Status, Mode=OneWay}">
                                        <TextBlock.Style>
                                            <Style TargetType="{x:Type TextBlock}">
                                                <Setter Property="Visibility" Value="Collapsed"></Setter>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding StatusToolTip}" Value="">
                                                        <Setter Property="Visibility" Value="Visible"></Setter>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                    <TextBlock VerticalAlignment="Center">
                                        <TextBlock.Style>
                                            <Style TargetType="{x:Type TextBlock}">
                                                <Setter Property="Visibility" Value="Visible"></Setter>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding StatusToolTip}" Value="">
                                                        <Setter Property="Visibility" Value="Collapsed"></Setter>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                        <Hyperlink Click="Hyperlink_Click"><TextBlock Text="{Binding Status, Mode=OneWay}"></TextBlock></Hyperlink>
                                    </TextBlock>
                                </Grid>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
        <StackPanel Grid.Row="2" Orientation="Vertical" HorizontalAlignment="Center">
            <Grid Margin="0,4,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" TextWrapping="Wrap" Text="{Binding BackupMessage}" HorizontalAlignment="Center"></TextBlock>
                <TextBlock Grid.Column="0" TextWrapping="Wrap" Text="{Binding BackupWarning}" Foreground="Red" HorizontalAlignment="Center"></TextBlock>
            </Grid>
            <StackPanel Orientation="Horizontal" Margin="0,12,0,20" HorizontalAlignment="Center">
                <Button IsDefault="True" Click="OkButton_Click" IsEnabled="{Binding !IsExecuting}">OK</Button>
                <Button Margin="12,0,0,0" IsCancel="True">Cancel</Button>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
